---

# https://github.com/microsoft/terminal/archive/refs/tags/v1.11.3471.0.zip

- name: Install using msix method
  tags:
    - windows_terminal
  block:

    - name: Create temporary download directory
      ansible.windows.win_tempfile:
        state: directory
        suffix: msix
      register: msix_download_dir

    - name: Download msix .zip package
      ansible.windows.win_get_url:
        url: https://github.com/microsoft/terminal/archive/refs/tags/v1.11.3471.0.zip
        dest: "{{ msix_download_dir.path }}\\win_term.zip"

    - name: Unzip msix file
      community.windows.win_unzip:
        src: "{{ msix_download_dir.path }}\\win_term.zip"
        dest: "{{ msix_download_dir.path }}\\win_term_dir"
        creates: "{{ wsl_ubuntu_dir.path }}\\win_term_dir"
      register: msix_unzip

    - name: Debug msix_unzip
      debug:
        var: msix_unzip
        verbosity: "{{ verbosity_level }}"

    # - name: Run wsl import ubuntu
    #   ansible.windows.win_package:
    #     path: "{{ wsl_ubuntu_dir.path }}\\ubuntu\\Ubuntu_2004.2021.825.0_x64.appx"
    #     state: present
    #   register: wsl_import